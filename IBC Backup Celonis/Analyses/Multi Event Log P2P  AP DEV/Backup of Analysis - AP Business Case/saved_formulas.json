[
  {
    "description": "",
    "id": "b542b44b-f629-471e-b37c-475873cc2c57",
    "name": "Paid Too Early_GMH",
    "parameterCount": 0,
    "parameters": [],
    "template": "AVG(CASE WHEN KPI(\"Payment After\") - KPI(\"Due After_GMH\") < -1*<%=buffer%> THEN 1.0 ELSE 0.0 END)"
  },
  {
    "description": "",
    "id": "5ff8dc75-200f-4091-8254-b27d733a8414",
    "name": "Differenz_GMH",
    "parameterCount": 0,
    "parameters": [],
    "template": "KPI(\"Payment After\") - KPI(\"Due After_GMH\")"
  },
  {
    "description": "",
    "id": "9bc54748-a2e4-4f91-bd6c-c19945c7ed65",
    "name": "MAX CD",
    "parameterCount": 0,
    "parameters": [],
    "template": "\"AP_BSEG\".\"SKFBT_CONVERTED\"* \"AP_BSEG\".\"ZBD1P\"/100.0"
  },
  {
    "description": "",
    "id": "a0457ca0-442d-4d2f-ba06-6a674a61deac",
    "name": "CD Netto",
    "parameterCount": 0,
    "parameters": [],
    "template": "\"AP_BSEG\".\"SKNTO_CONVERTED\""
  },
  {
    "description": null,
    "id": "c31d54c8-5a06-4c46-9a9e-006450cf65d5",
    "name": "Opportunity: Manual changes",
    "parameterCount": 0,
    "parameters": [],
    "template": "<%= SETUP_TIME_FACTOR %>*\r\n\r\n \r\n\r\n\t\t\t\t\t\r\n\r\n(--potential to reduce change act\r\n(<%= MAN_CHANGE_ACT_1_POT %>/100.0)\r\n\r\n--minutes of change activity\r\n*<%= MAN_CHANGE_ACT_1_EFF %>\r\n\r\n--fte cost per minute\r\n*(<%= SETUP_FTE_COST %>/(<%= SETUP_FTE_HOURS %>*60.0))\r\n\r\n\r\n\r\n--quantity of change activity\r\n*SUM(\r\nPU_COUNT(\r\n    \"BSEG\",\r\n    \"_CEL_AP_ACTIVITIES\".\"_CASE_KEY\", \r\n    \"_CEL_AP_ACTIVITIES\".\"ACTIVITY_EN\" = '<%= MAN_CHANGE_ACT_1 %>' AND\r\n    \"_CEL_AP_ACTIVITIES\".\"USER_TYPE\" IN (<%= SETUP_MANUAL_USER_TYPE %>) \r\n)\r\n)\r\n\r\n+\r\n\r\n\t\t\t\t\t\r\n\r\n--potential to reduce change act\r\n(<%= MAN_CHANGE_ACT_2_POT %>/100.0)\r\n\r\n--minutes of change activity\r\n*<%= MAN_CHANGE_ACT_2_EFF %>\r\n\r\n--fte cost per minute\r\n*(<%= SETUP_FTE_COST %>/(<%= SETUP_FTE_HOURS %>*60.0))\r\n\r\n\r\n\r\n--quantity of change activity\r\n*SUM(\r\nPU_COUNT(\r\n    \"BSEG\",\r\n    \"_CEL_AP_ACTIVITIES\".\"_CASE_KEY\", \r\n    \"_CEL_AP_ACTIVITIES\".\"ACTIVITY_EN\" = '<%= MAN_CHANGE_ACT_2 %>' AND\r\n    \"_CEL_AP_ACTIVITIES\".\"USER_TYPE\" IN (<%= SETUP_MANUAL_USER_TYPE %>) \r\n)\r\n)\r\n\r\n\r\n+\r\n\r\n\t\t\t\t\t\r\n\r\n--potential to reduce change act\r\n(<%= MAN_CHANGE_ACT_3_POT %>/100.0)\r\n\r\n--minutes of change activity\r\n*<%= MAN_CHANGE_ACT_3_EFF %>\r\n\r\n--fte cost per minute\r\n*(<%= SETUP_FTE_COST %>/(<%= SETUP_FTE_HOURS %>*60.0))\r\n\r\n\r\n\r\n--quantity of change activity\r\n*SUM(\r\nPU_COUNT(\r\n    \"BSEG\",\r\n    \"_CEL_AP_ACTIVITIES\".\"_CASE_KEY\", \r\n    \"_CEL_AP_ACTIVITIES\".\"ACTIVITY_EN\" = '<%= MAN_CHANGE_ACT_3 %>' AND\r\n    \"_CEL_AP_ACTIVITIES\".\"USER_TYPE\" IN (<%= SETUP_MANUAL_USER_TYPE %>) \r\n)\r\n)\r\n\r\n+\r\n\r\n\t\t\t\t\t\r\n\r\n--potential to reduce change act\r\n(<%= MAN_CHANGE_ACT_4_POT %>/100.0)\r\n\r\n--minutes of change activity\r\n*<%= MAN_CHANGE_ACT_4_EFF %>\r\n\r\n--fte cost per minute\r\n*(<%= SETUP_FTE_COST %>/(<%= SETUP_FTE_HOURS %>*60.0))\r\n\r\n\r\n\r\n--quantity of change activity\r\n*SUM(\r\nPU_COUNT(\r\n    \"BSEG\",\r\n    \"_CEL_AP_ACTIVITIES\".\"_CASE_KEY\", \r\n    \"_CEL_AP_ACTIVITIES\".\"ACTIVITY_EN\" = '<%= MAN_CHANGE_ACT_4 %>' AND\r\n    \"_CEL_AP_ACTIVITIES\".\"USER_TYPE\" IN (<%= SETUP_MANUAL_USER_TYPE %>) \r\n)\r\n)\r\n\r\n+\r\n\r\n\t\t\t\t\t\r\n\r\n--potential to reduce change act\r\n(<%= MAN_CHANGE_ACT_5_POT %>/100.0)\r\n\r\n--minutes of change activity\r\n*<%= MAN_CHANGE_ACT_5_EFF %>\r\n\r\n--fte cost per minute\r\n*(<%= SETUP_FTE_COST %>/(<%= SETUP_FTE_HOURS %>*60.0))\r\n\r\n\r\n\r\n--quantity of change activity\r\n*SUM(\r\nPU_COUNT(\r\n    \"BSEG\",\r\n    \"_CEL_AP_ACTIVITIES\".\"_CASE_KEY\", \r\n    \"_CEL_AP_ACTIVITIES\".\"ACTIVITY_EN\" = '<%= MAN_CHANGE_ACT_5 %>' AND\r\n    \"_CEL_AP_ACTIVITIES\".\"USER_TYPE\" IN (<%= SETUP_MANUAL_USER_TYPE %>) \r\n)\r\n)\r\n\r\n+\r\n\r\n\t\t\t\t\t\r\n\r\n--potential to reduce change act\r\n(<%= MAN_CHANGE_ACT_6_POT %>/100.0)\r\n\r\n--minutes of change activity\r\n*<%= MAN_CHANGE_ACT_6_EFF %>\r\n\r\n--fte cost per minute\r\n*(<%= SETUP_FTE_COST %>/(<%= SETUP_FTE_HOURS %>*60.0))\r\n\r\n\r\n\r\n--quantity of change activity\r\n*SUM(\r\nPU_COUNT(\r\n    \"BSEG\",\r\n    \"_CEL_AP_ACTIVITIES\".\"_CASE_KEY\", \r\n    \"_CEL_AP_ACTIVITIES\".\"ACTIVITY_EN\" = '<%= MAN_CHANGE_ACT_6 %>' AND\r\n    \"_CEL_AP_ACTIVITIES\".\"USER_TYPE\" IN (<%= SETUP_MANUAL_USER_TYPE %>) \r\n)\r\n)\r\n\r\n+\r\n\r\n\t\t\t\t\t\r\n\r\n--potential to reduce change act\r\n(<%= MAN_CHANGE_ACT_7_POT %>/100.0)\r\n\r\n--minutes of change activity\r\n*<%= MAN_CHANGE_ACT_7_EFF %>\r\n\r\n--fte cost per minute\r\n*(<%= SETUP_FTE_COST %>/(<%= SETUP_FTE_HOURS %>*60.0))\r\n\r\n\r\n\r\n--quantity of change activity\r\n*SUM(\r\nPU_COUNT(\r\n    \"BSEG\",\r\n    \"_CEL_AP_ACTIVITIES\".\"_CASE_KEY\", \r\n    \"_CEL_AP_ACTIVITIES\".\"ACTIVITY_EN\" = '<%= MAN_CHANGE_ACT_7 %>' AND\r\n    \"_CEL_AP_ACTIVITIES\".\"USER_TYPE\" IN (<%= SETUP_MANUAL_USER_TYPE %>) \r\n)\r\n)\r\n\r\n+\r\n\r\n\t\t\t\t\t\r\n\r\n--potential to reduce change act\r\n(<%= MAN_CHANGE_ACT_8_POT %>/100.0)\r\n\r\n--minutes of change activity\r\n*<%= MAN_CHANGE_ACT_8_EFF %>\r\n\r\n--fte cost per minute\r\n*(<%= SETUP_FTE_COST %>/(<%= SETUP_FTE_HOURS %>*60.0))\r\n\r\n\r\n\r\n--quantity of change activity\r\n*SUM(\r\nPU_COUNT(\r\n    \"BSEG\",\r\n    \"_CEL_AP_ACTIVITIES\".\"_CASE_KEY\", \r\n    \"_CEL_AP_ACTIVITIES\".\"ACTIVITY_EN\" = '<%= MAN_CHANGE_ACT_8 %>' AND\r\n    \"_CEL_AP_ACTIVITIES\".\"USER_TYPE\" IN (<%= SETUP_MANUAL_USER_TYPE %>) \r\n)\r\n)\r\n\r\n+\r\n\r\n\t\t\t\t\t\r\n\r\n--potential to reduce change act\r\n(<%= MAN_CHANGE_ACT_9_POT %>/100.0)\r\n\r\n--minutes of change activity\r\n*<%= MAN_CHANGE_ACT_9_EFF %>\r\n\r\n--fte cost per minute\r\n*(<%= SETUP_FTE_COST %>/(<%= SETUP_FTE_HOURS %>*60.0))\r\n\r\n\r\n\r\n--quantity of change activity\r\n*SUM(\r\nPU_COUNT(\r\n    \"BSEG\",\r\n    \"_CEL_AP_ACTIVITIES\".\"_CASE_KEY\", \r\n    \"_CEL_AP_ACTIVITIES\".\"ACTIVITY_EN\" = '<%= MAN_CHANGE_ACT_9 %>' AND\r\n    \"_CEL_AP_ACTIVITIES\".\"USER_TYPE\" IN (<%= SETUP_MANUAL_USER_TYPE %>) \r\n)\r\n)\r\n\r\n+\r\n\r\n\t\t\t\t\t \r\n\r\n--potential to reduce change act\r\n(<%= MAN_CHANGE_ACT_10_POT %>/100.0)\r\n\r\n--minutes of change activity\r\n*<%= MAN_CHANGE_ACT_10_EFF %>\r\n\r\n--fte cost per minute\r\n*(<%= SETUP_FTE_COST %>/(<%= SETUP_FTE_HOURS %>*60.0))\r\n\r\n\r\n\r\n--quantity of change activity\r\n*SUM(\r\nPU_COUNT(\r\n    \"BSEG\",\r\n    \"_CEL_AP_ACTIVITIES\".\"_CASE_KEY\", \r\n    \"_CEL_AP_ACTIVITIES\".\"ACTIVITY_EN\" = '<%= MAN_CHANGE_ACT_10 %>' AND\r\n    \"_CEL_AP_ACTIVITIES\".\"USER_TYPE\" IN (<%= SETUP_MANUAL_USER_TYPE %>) \r\n)\r\n)\r\n)"
  },
  {
    "description": null,
    "id": "8ae27317-4195-4619-91ea-b2507697a74b",
    "name": "Maverick Buying: Invoice wo PO",
    "parameterCount": 0,
    "parameters": [],
    "template": "SUM(\nCASE\n    WHEN <%=MAV_IS_MAVERICK%> THEN 0.0\n    WHEN \"BSEG\".\"WRBTR_CONVERTED\" > <%=MAV_BUYING_LIMIT%> THEN 0.0\n    WHEN ISNULL(\"LFA1\".\"VBUND\") = 0 THEN 0.0\n    ELSE 1.0\nEND\n)"
  },
  {
    "description": null,
    "id": "0bc8d51f-78d8-4766-a886-8b9b34bdfe1d",
    "name": "Opportunity: Analysis and Reporting",
    "parameterCount": 0,
    "parameters": [],
    "template": "<%= REPORTING_FTE %>\n*\n<%= REPORTING_EFF %>\n*\n(<%= SETUP_FTE_COST %>\n/\n<%= SETUP_FTE_HOURS %>)\n*\n52\n*\n(<%=REPORTING_IMP%> * .01)\n\n+\n\n<%= ANALYSES_FTE %>\n*\n<%= ANALYSES_EFF %>\n*\n(<%= SETUP_FTE_COST %>\n/\n<%= SETUP_FTE_HOURS %>)\n*\n52\n*\n(<%=ANALYSES_IMP%> * .01)"
  },
  {
    "description": null,
    "id": "73d12ab2-231e-47ee-941e-fe838f93b6b4",
    "name": "Opportunity: Early Payments",
    "parameterCount": 0,
    "parameters": [],
    "template": "--SETUP_DUE_DATE = required payment date\n--SETUP_CLEARING_DATE = Actual payment date\n--OTD_Latest = latest date in dataset\n--DAYS_BETWEEN(X,Y) = Y - X [days]\n\nSUM(CASE\n    \n    --NO Due Date\n    WHEN ISNULL(<%= SETUP_DUE_DATE %>) = 1 \n    THEN 0.0\n    \n    --ON TIME (POTENTIALLY)\n    WHEN ISNULL(<%= SETUP_CLEARING_DATE %>) = 1 \n    AND DAYS_BETWEEN(TO_TIMESTAMP('<%= OTD_LATEST %>','YYYYMMDD'),<%= SETUP_DUE_DATE %>) >= 0 \n    THEN 0.0\n    --'No payment but future due date'\n    \n    --TOO LATE, NO Payment\n    WHEN ISNULL(<%= SETUP_CLEARING_DATE %>) = 1 \n    AND DAYS_BETWEEN(TO_TIMESTAMP('<%= OTD_LATEST %>','YYYYMMDD'),<%= SETUP_DUE_DATE %>)  < 0 \n    THEN 0.0\n    --'No goods receipt and due date passed'\n    --'Late delivery'\n    \n    --ON TIME WITH EARLY INTERVAL\n    WHEN DAYS_BETWEEN(<%= SETUP_CLEARING_DATE %>, <%= SETUP_DUE_DATE %>) >= <%= LATE_PAYMENT_THRESH_MIN %>\n    AND DAYS_BETWEEN(<%= SETUP_CLEARING_DATE %>, <%= SETUP_DUE_DATE %>) <= <%= EARLY_PAYMENT_THRESH_MIN %>\n    THEN 0.0\n    --'On time delivery'\n    --although a little early, it is within the early interval of everything between 0 to x days early\n     \n    --TOO EARLY\n    --'Early delivery'\n    --outside the On time delivery interval, too early\n\n    WHEN DAYS_BETWEEN(<%=SETUP_CLEARING_DATE%>,<%=SETUP_DISCOUNT_DATE%>) > <%= EARLY_PAYMENT_THRESH_MIN %>\n    AND DAYS_BETWEEN(<%= SETUP_CLEARING_DATE %>, <%= SETUP_DUE_DATE %>) <= <%= EARLY_PAYMENT_THRESH_MAX %>\n    AND ISNULL(\"LFA1\".\"VBUND\") = 1\n    THEN \"BSEG\".\"WRBTR_CONVERTED\"*(DAYS_BETWEEN(<%= SETUP_CLEARING_DATE %>, <%= SETUP_DUE_DATE %>)/365.0)*(<%= SETUP_ROIC %>/100.0) --Paid too early before discount date\n    \n    \n    WHEN DAYS_BETWEEN(<%=SETUP_CLEARING_DATE%>,<%=SETUP_DUE_DATE%>) > <%= EARLY_PAYMENT_THRESH_MIN %>\n    AND PU_COUNT(BSEG,_CEL_AP_ACTIVITIES.ACTIVITY_EN,_CEL_AP_ACTIVITIES.ACTIVITY_EN = 'Cash Discount Due Date passed') = 0 \n    AND DAYS_BETWEEN(<%= SETUP_CLEARING_DATE %>, <%= SETUP_DUE_DATE %>) <= <%= EARLY_PAYMENT_THRESH_MAX %>\n    AND ISNULL(\"LFA1\".\"VBUND\") = 1\n    THEN \"BSEG\".\"WRBTR_CONVERTED\"*(DAYS_BETWEEN(<%= SETUP_CLEARING_DATE %>, <%= SETUP_DUE_DATE %>)/365.0)*(<%= SETUP_ROIC %>/100.0)--paid too early when no cash discount due date exists\n    \n    \n    \n    WHEN DAYS_BETWEEN(<%=SETUP_CLEARING_DATE%>,<%=SETUP_DUE_DATE%>) > <%= EARLY_PAYMENT_THRESH_MIN %>\n    AND DAYS_BETWEEN(<%=SETUP_DISCOUNT_DATE%>,<%=SETUP_CLEARING_DATE%>) > 0  \n    AND DAYS_BETWEEN(<%= SETUP_CLEARING_DATE %>, <%= SETUP_DUE_DATE %>) <= <%= EARLY_PAYMENT_THRESH_MAX %>    \n    AND ISNULL(\"LFA1\".\"VBUND\") = 1\n    THEN \"BSEG\".\"WRBTR_CONVERTED\"*(DAYS_BETWEEN(<%= SETUP_CLEARING_DATE %>, <%= SETUP_DUE_DATE %>)/365.0)*(<%= SETUP_ROIC %>/100.0) --paid too early when a cash discount due date exists (and was missed)\n   \n\n    \n    \n    --TOO LATE\n    WHEN DAYS_BETWEEN(<%= SETUP_CLEARING_DATE %>, <%= SETUP_DUE_DATE %>) < <%= LATE_PAYMENT_THRESH_MIN %>\n    THEN 0.0\n    --'Late delivery'\n    --outside the On time delivery interval, too late\n    \n    ELSE 0.0\n    --'Other'\n    \nEND)*(1.0*<%= EARLY_PAYMENT_OPT %>/100)\n\n\n\n\n\n*<%=SETUP_TIME_FACTOR%>"
  },
  {
    "description": null,
    "id": "df60c389-cfee-466e-9b4e-8f880a986ca7",
    "name": "Opportunity: Rework",
    "parameterCount": 0,
    "parameters": [],
    "template": "<%=SETUP_TIME_FACTOR%>*\r\n\r\n--ACT 1\r\n\r\n(\r\n--minutes of rework activity\r\n<%= REWORK_ACT_1_EFF %>\r\n\r\n--fte cost per minute\r\n*(<%= SETUP_FTE_COST %>/(<%= SETUP_FTE_HOURS %>*60.0))\r\n\r\n--potential to reduce rework\r\n*(<%= REWORK_ACT_1_POT %>/100.0)\r\n\r\n--quantity of rework activity\r\n*SUM(\r\nPU_COUNT(\r\n    \"BSEG\",\r\n    \"_CEL_AP_ACTIVITIES\".\"_CASE_KEY\",\r\n    \"_CEL_AP_ACTIVITIES\".\"ACTIVITY_EN\" = ('<%= REWORK_ACT_1 %>') AND\r\n    \"_CEL_AP_ACTIVITIES\".\"USER_TYPE\" IN (<%= SETUP_MANUAL_USER_TYPE %>) \r\n)\r\n)\r\n\r\n--ACT 2\r\n+\r\n\r\n--minutes of rework activity\r\n<%= REWORK_ACT_2_EFF %>\r\n\r\n--fte cost per minute\r\n*(<%= SETUP_FTE_COST %>/(<%= SETUP_FTE_HOURS %>*60.0))\r\n\r\n--potential to reduce rework\r\n*(<%= REWORK_ACT_2_POT %>/100.0)\r\n\r\n--quantity of rework activity\r\n*SUM(\r\nPU_COUNT(\r\n    \"BSEG\",\r\n    \"_CEL_AP_ACTIVITIES\".\"_CASE_KEY\",\r\n    \"_CEL_AP_ACTIVITIES\".\"ACTIVITY_EN\" = ('<%= REWORK_ACT_2 %>') AND\r\n    \"_CEL_AP_ACTIVITIES\".\"USER_TYPE\" IN (<%= SETUP_MANUAL_USER_TYPE %>) \r\n)\r\n)\r\n\r\n\r\n--ACT 3\r\n+\r\n\r\n--minutes of rework activity\r\n<%= REWORK_ACT_3_EFF %>\r\n\r\n--fte cost per minute\r\n*(<%= SETUP_FTE_COST %>/(<%= SETUP_FTE_HOURS %>*60.0))\r\n\r\n--potential to reduce rework\r\n*(<%= REWORK_ACT_3_POT %>/100.0)\r\n\r\n--quantity of rework activity\r\n*SUM(\r\nPU_COUNT(\r\n    \"BSEG\",\r\n    \"_CEL_AP_ACTIVITIES\".\"_CASE_KEY\",\r\n    \"_CEL_AP_ACTIVITIES\".\"ACTIVITY_EN\" = ('<%= REWORK_ACT_3 %>') AND\r\n    \"_CEL_AP_ACTIVITIES\".\"USER_TYPE\" IN (<%= SETUP_MANUAL_USER_TYPE %>) \r\n)\r\n)\r\n\r\n\r\n--ACT 4\r\n+\r\n\r\n--minutes of rework activity\r\n<%= REWORK_ACT_4_EFF %>\r\n\r\n--fte cost per minute\r\n*(<%= SETUP_FTE_COST %>/(<%= SETUP_FTE_HOURS %>*60.0))\r\n\r\n--potential to reduce rework\r\n*(<%= REWORK_ACT_4_POT %>/100.0)\r\n\r\n--quantity of rework activity\r\n*SUM(\r\nPU_COUNT(\r\n    \"BSEG\",\r\n    \"_CEL_AP_ACTIVITIES\".\"_CASE_KEY\",\r\n    \"_CEL_AP_ACTIVITIES\".\"ACTIVITY_EN\" = ('<%= REWORK_ACT_4 %>') AND\r\n    \"_CEL_AP_ACTIVITIES\".\"USER_TYPE\" IN (<%= SETUP_MANUAL_USER_TYPE %>) \r\n)\r\n)\r\n\r\n\r\n--ACT 5\r\n+\r\n\r\n--minutes of rework activity\r\n<%= REWORK_ACT_5_EFF %>\r\n\r\n--fte cost per minute\r\n*(<%= SETUP_FTE_COST %>/(<%= SETUP_FTE_HOURS %>*60.0))\r\n\r\n--potential to reduce rework\r\n*(<%= REWORK_ACT_5_POT %>/100.0)\r\n\r\n--quantity of rework activity\r\n*SUM(\r\nPU_COUNT(\r\n    \"BSEG\",\r\n    \"_CEL_AP_ACTIVITIES\".\"_CASE_KEY\",\r\n    \"_CEL_AP_ACTIVITIES\".\"ACTIVITY_EN\" = ('<%= REWORK_ACT_5 %>') AND\r\n    \"_CEL_AP_ACTIVITIES\".\"USER_TYPE\" IN (<%= SETUP_MANUAL_USER_TYPE %>) \r\n)\r\n)\r\n)"
  },
  {
    "description": null,
    "id": "b939c6b7-4867-479a-90dd-d733f3320a9b",
    "name": "Opportunity: Automation",
    "parameterCount": 0,
    "parameters": [],
    "template": "<%= SETUP_TIME_FACTOR %>*\r\n\r\n--((AUTOMATION TARGET RATE * #ALL CASES) - #AUTOMATED CASES) * EFFORT * COST\r\n\r\n\r\n--AUTOMATION TARGET RATE\r\n(<%= AUTOMATION_ACT_1_TRGT %>/100.0\r\n\r\n\r\n--TIMES #ALL CASES: HOW MANY CASES ARE THERE THAT GO THROUGH CURRENT ACTIVITY WHERE WE KNOW THE USER TYPE? \r\n*\r\n(1.0*SUM(\r\n    PU_COUNT(\r\n   \"<%= SETUP_NAME_CASE_TABLE %>\", \"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"_CASE_KEY\",\r\n   \"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"ACTIVITY_<%= SETUP_LANGUAGE %>\" = '<%=AUTOMATION_ACT_1%>' AND \r\n   ISNULL(\"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"USER_TYPE\") = 0\r\n)))\r\n\r\n--GIVES US THE TO BE REACHED AUTOMATED CASE COUNT\r\n\r\n\r\n--SUBTRACT THE CASE COUNT THAT ARE AUTOMATED IN THAT ACTIVITY (DISREGARDING NULL VALUES)\r\n-\r\n(SUM(\r\n    PU_COUNT(\r\n   \"<%= SETUP_NAME_CASE_TABLE %>\", \"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"_CASE_KEY\",\r\n   \"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"ACTIVITY_<%= SETUP_LANGUAGE %>\" = '<%=AUTOMATION_ACT_1%>' AND \r\n   ISNULL(\"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"USER_TYPE\") = 0 AND \r\n   \"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"USER_TYPE\" NOT IN (<%= SETUP_MANUAL_USER_TYPE %>)\r\n))))\r\n--GIVES US THE REMAINING CASE COUNT (CASES THAT SHOULD BE AUTOMATED BUT ARE NOT YET)\r\n\r\n\r\n--TIMES EFFORT (in min)\r\n*\r\n<%= AUTOMATION_ACT_1_EFF %>\r\n\r\n--TIMES FTE COST PER MINUTE\r\n*\r\n(<%= SETUP_FTE_COST %>/(<%= SETUP_FTE_HOURS %>*60.0))\r\n\r\n+\r\n\r\n--((AUTOMATION TARGET RATE * #ALL CASES) - #AUTOMATED CASES) * EFFORT * COST\r\n\r\n\r\n--AUTOMATION TARGET RATE\r\n(<%= AUTOMATION_ACT_2_TRGT %>/100.0\r\n\r\n\r\n--TIMES #ALL CASES: HOW MANY CASES ARE THERE THAT GO THROUGH CURRENT ACTIVITY WHERE WE KNOW THE USER TYPE? \r\n*\r\n(1.0*SUM(\r\n    PU_COUNT(\r\n   \"<%= SETUP_NAME_CASE_TABLE %>\", \"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"_CASE_KEY\",\r\n   \"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"ACTIVITY_<%= SETUP_LANGUAGE %>\" = '<%=AUTOMATION_ACT_2%>' AND \r\n   ISNULL(\"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"USER_TYPE\") = 0\r\n)))\r\n\r\n--GIVES US THE TO BE REACHED AUTOMATED CASE COUNT\r\n\r\n\r\n--SUBTRACT THE CASE COUNT THAT ARE AUTOMATED IN THAT ACTIVITY (DISREGARDING NULL VALUES)\r\n-\r\n(SUM(\r\n    PU_COUNT(\r\n   \"<%= SETUP_NAME_CASE_TABLE %>\", \"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"_CASE_KEY\",\r\n   \"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"ACTIVITY_<%= SETUP_LANGUAGE %>\" = '<%=AUTOMATION_ACT_2%>' AND \r\n   ISNULL(\"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"USER_TYPE\") = 0 AND \r\n   \"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"USER_TYPE\" NOT IN (<%= SETUP_MANUAL_USER_TYPE %>)\r\n))))\r\n--GIVES US THE REMAINING CASE COUNT (CASES THAT SHOULD BE AUTOMATED BUT ARE NOT YET)\r\n\r\n\r\n--TIMES EFFORT (in min)\r\n*\r\n<%= AUTOMATION_ACT_2_EFF %>\r\n\r\n--TIMES FTE COST PER MINUTE\r\n*\r\n(<%= SETUP_FTE_COST %>/(<%= SETUP_FTE_HOURS %>*60.0))\r\n\r\n\r\n+\r\n\r\n--((AUTOMATION TARGET RATE * #ALL CASES) - #AUTOMATED CASES) * EFFORT * COST\r\n\r\n\r\n--AUTOMATION TARGET RATE\r\n(<%= AUTOMATION_ACT_3_TRGT %>/100.0\r\n\r\n\r\n--TIMES #ALL CASES: HOW MANY CASES ARE THERE THAT GO THROUGH CURRENT ACTIVITY WHERE WE KNOW THE USER TYPE? \r\n*\r\n(1.0*SUM(\r\n    PU_COUNT(\r\n   \"<%= SETUP_NAME_CASE_TABLE %>\", \"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"_CASE_KEY\",\r\n   \"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"ACTIVITY_<%= SETUP_LANGUAGE %>\" = '<%=AUTOMATION_ACT_3%>' AND \r\n   ISNULL(\"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"USER_TYPE\") = 0\r\n)))\r\n\r\n--GIVES US THE TO BE REACHED AUTOMATED CASE COUNT\r\n\r\n\r\n--SUBTRACT THE CASE COUNT THAT ARE AUTOMATED IN THAT ACTIVITY (DISREGARDING NULL VALUES)\r\n-\r\n(SUM(\r\n    PU_COUNT(\r\n   \"<%= SETUP_NAME_CASE_TABLE %>\", \"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"_CASE_KEY\",\r\n   \"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"ACTIVITY_<%= SETUP_LANGUAGE %>\" = '<%=AUTOMATION_ACT_3%>' AND \r\n   ISNULL(\"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"USER_TYPE\") = 0 AND \r\n   \"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"USER_TYPE\" NOT IN (<%= SETUP_MANUAL_USER_TYPE %>)\r\n))))\r\n--GIVES US THE REMAINING CASE COUNT (CASES THAT SHOULD BE AUTOMATED BUT ARE NOT YET)\r\n\r\n\r\n--TIMES EFFORT (in min)\r\n*\r\n<%= AUTOMATION_ACT_3_EFF %>\r\n\r\n--TIMES FTE COST PER MINUTE\r\n*\r\n(<%= SETUP_FTE_COST %>/(<%= SETUP_FTE_HOURS %>*60.0))\r\n\r\n+\r\n\r\n--((AUTOMATION TARGET RATE * #ALL CASES) - #AUTOMATED CASES) * EFFORT * COST\r\n\r\n\r\n--AUTOMATION TARGET RATE\r\n(<%= AUTOMATION_ACT_4_TRGT %>/100.0\r\n\r\n\r\n--TIMES #ALL CASES: HOW MANY CASES ARE THERE THAT GO THROUGH CURRENT ACTIVITY WHERE WE KNOW THE USER TYPE? \r\n*\r\n(1.0*SUM(\r\n    PU_COUNT(\r\n   \"<%= SETUP_NAME_CASE_TABLE %>\", \"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"_CASE_KEY\",\r\n   \"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"ACTIVITY_<%= SETUP_LANGUAGE %>\" = '<%=AUTOMATION_ACT_4%>' AND \r\n   ISNULL(\"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"USER_TYPE\") = 0\r\n)))\r\n\r\n--GIVES US THE TO BE REACHED AUTOMATED CASE COUNT\r\n\r\n\r\n--SUBTRACT THE CASE COUNT THAT ARE AUTOMATED IN THAT ACTIVITY (DISREGARDING NULL VALUES)\r\n-\r\n(SUM(\r\n    PU_COUNT(\r\n   \"<%= SETUP_NAME_CASE_TABLE %>\", \"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"_CASE_KEY\",\r\n   \"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"ACTIVITY_<%= SETUP_LANGUAGE %>\" = '<%=AUTOMATION_ACT_4%>' AND \r\n   ISNULL(\"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"USER_TYPE\") = 0 AND \r\n   \"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"USER_TYPE\" NOT IN (<%= SETUP_MANUAL_USER_TYPE %>)\r\n))))\r\n--GIVES US THE REMAINING CASE COUNT (CASES THAT SHOULD BE AUTOMATED BUT ARE NOT YET)\r\n\r\n\r\n--TIMES EFFORT (in min)\r\n*\r\n<%= AUTOMATION_ACT_4_EFF %>\r\n\r\n--TIMES FTE COST PER MINUTE\r\n*\r\n(<%= SETUP_FTE_COST %>/(<%= SETUP_FTE_HOURS %>*60.0))\r\n\r\n\r\n+\r\n\r\n--((AUTOMATION TARGET RATE * #ALL CASES) - #AUTOMATED CASES) * EFFORT * COST\r\n\r\n\r\n--AUTOMATION TARGET RATE\r\n(<%= AUTOMATION_ACT_5_TRGT %>/100.0\r\n\r\n\r\n--TIMES #ALL CASES: HOW MANY CASES ARE THERE THAT GO THROUGH CURRENT ACTIVITY WHERE WE KNOW THE USER TYPE? \r\n*\r\n(1.0*SUM(\r\n    PU_COUNT(\r\n   \"<%= SETUP_NAME_CASE_TABLE %>\", \"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"_CASE_KEY\",\r\n   \"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"ACTIVITY_<%= SETUP_LANGUAGE %>\" = '<%=AUTOMATION_ACT_5%>' AND \r\n   ISNULL(\"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"USER_TYPE\") = 0\r\n)))\r\n\r\n--GIVES US THE TO BE REACHED AUTOMATED CASE COUNT\r\n\r\n\r\n--SUBTRACT THE CASE COUNT THAT ARE AUTOMATED IN THAT ACTIVITY (DISREGARDING NULL VALUES)\r\n-\r\n(SUM(\r\n    PU_COUNT(\r\n   \"<%= SETUP_NAME_CASE_TABLE %>\", \"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"_CASE_KEY\",\r\n   \"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"ACTIVITY_<%= SETUP_LANGUAGE %>\" = '<%=AUTOMATION_ACT_5%>' AND \r\n   ISNULL(\"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"USER_TYPE\") = 0 AND \r\n   \"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"USER_TYPE\" NOT IN (<%= SETUP_MANUAL_USER_TYPE %>)\r\n))))\r\n--GIVES US THE REMAINING CASE COUNT (CASES THAT SHOULD BE AUTOMATED BUT ARE NOT YET)\r\n\r\n\r\n--TIMES EFFORT (in min)\r\n*\r\n<%= AUTOMATION_ACT_5_EFF %>\r\n\r\n--TIMES FTE COST PER MINUTE\r\n*\r\n(<%= SETUP_FTE_COST %>/(<%= SETUP_FTE_HOURS %>*60.0))\r\n\r\n\r\n+\r\n\r\n--((AUTOMATION TARGET RATE * #ALL CASES) - #AUTOMATED CASES) * EFFORT * COST\r\n\r\n\r\n--AUTOMATION TARGET RATE\r\n(<%= AUTOMATION_ACT_6_TRGT %>/100.0\r\n\r\n\r\n--TIMES #ALL CASES: HOW MANY CASES ARE THERE THAT GO THROUGH CURRENT ACTIVITY WHERE WE KNOW THE USER TYPE? \r\n*\r\n(1.0*SUM(\r\n    PU_COUNT(\r\n   \"<%= SETUP_NAME_CASE_TABLE %>\", \"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"_CASE_KEY\",\r\n   \"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"ACTIVITY_<%= SETUP_LANGUAGE %>\" = '<%=AUTOMATION_ACT_6%>' AND \r\n   ISNULL(\"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"USER_TYPE\") = 0\r\n)))\r\n\r\n--GIVES US THE TO BE REACHED AUTOMATED CASE COUNT\r\n\r\n\r\n--SUBTRACT THE CASE COUNT THAT ARE AUTOMATED IN THAT ACTIVITY (DISREGARDING NULL VALUES)\r\n-\r\n(SUM(\r\n    PU_COUNT(\r\n   \"<%= SETUP_NAME_CASE_TABLE %>\", \"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"_CASE_KEY\",\r\n   \"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"ACTIVITY_<%= SETUP_LANGUAGE %>\" = '<%=AUTOMATION_ACT_6%>' AND \r\n   ISNULL(\"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"USER_TYPE\") = 0 AND \r\n   \"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"USER_TYPE\" NOT IN (<%= SETUP_MANUAL_USER_TYPE %>)\r\n))))\r\n--GIVES US THE REMAINING CASE COUNT (CASES THAT SHOULD BE AUTOMATED BUT ARE NOT YET)\r\n\r\n\r\n--TIMES EFFORT (in min)\r\n*\r\n<%= AUTOMATION_ACT_6_EFF %>\r\n\r\n--TIMES FTE COST PER MINUTE\r\n*\r\n(<%= SETUP_FTE_COST %>/(<%= SETUP_FTE_HOURS %>*60.0))\r\n\r\n\r\n+\r\n\r\n--((AUTOMATION TARGET RATE * #ALL CASES) - #AUTOMATED CASES) * EFFORT * COST\r\n\r\n\r\n--AUTOMATION TARGET RATE\r\n(<%= AUTOMATION_ACT_7_TRGT %>/100.0\r\n\r\n\r\n--TIMES #ALL CASES: HOW MANY CASES ARE THERE THAT GO THROUGH CURRENT ACTIVITY WHERE WE KNOW THE USER TYPE? \r\n*\r\n(1.0*SUM(\r\n    PU_COUNT(\r\n   \"<%= SETUP_NAME_CASE_TABLE %>\", \"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"_CASE_KEY\",\r\n   \"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"ACTIVITY_<%= SETUP_LANGUAGE %>\" = '<%=AUTOMATION_ACT_7%>' AND \r\n   ISNULL(\"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"USER_TYPE\") = 0\r\n)))\r\n\r\n--GIVES US THE TO BE REACHED AUTOMATED CASE COUNT\r\n\r\n\r\n--SUBTRACT THE CASE COUNT THAT ARE AUTOMATED IN THAT ACTIVITY (DISREGARDING NULL VALUES)\r\n-\r\n(SUM(\r\n    PU_COUNT(\r\n   \"<%= SETUP_NAME_CASE_TABLE %>\", \"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"_CASE_KEY\",\r\n   \"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"ACTIVITY_<%= SETUP_LANGUAGE %>\" = '<%=AUTOMATION_ACT_7%>' AND \r\n   ISNULL(\"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"USER_TYPE\") = 0 AND \r\n   \"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"USER_TYPE\" NOT IN (<%= SETUP_MANUAL_USER_TYPE %>)\r\n))))\r\n--GIVES US THE REMAINING CASE COUNT (CASES THAT SHOULD BE AUTOMATED BUT ARE NOT YET)\r\n\r\n\r\n--TIMES EFFORT (in min)\r\n*\r\n<%= AUTOMATION_ACT_7_EFF %>\r\n\r\n--TIMES FTE COST PER MINUTE\r\n*\r\n(<%= SETUP_FTE_COST %>/(<%= SETUP_FTE_HOURS %>*60.0))\r\n\r\n\r\n+\r\n\r\n--((AUTOMATION TARGET RATE * #ALL CASES) - #AUTOMATED CASES) * EFFORT * COST\r\n\r\n\r\n--AUTOMATION TARGET RATE\r\n(<%= AUTOMATION_ACT_8_TRGT %>/100.0\r\n\r\n\r\n--TIMES #ALL CASES: HOW MANY CASES ARE THERE THAT GO THROUGH CURRENT ACTIVITY WHERE WE KNOW THE USER TYPE? \r\n*\r\n(1.0*SUM(\r\n    PU_COUNT(\r\n   \"<%= SETUP_NAME_CASE_TABLE %>\", \"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"_CASE_KEY\",\r\n   \"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"ACTIVITY_<%= SETUP_LANGUAGE %>\" = '<%=AUTOMATION_ACT_8%>' AND \r\n   ISNULL(\"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"USER_TYPE\") = 0\r\n)))\r\n\r\n--GIVES US THE TO BE REACHED AUTOMATED CASE COUNT\r\n\r\n\r\n--SUBTRACT THE CASE COUNT THAT ARE AUTOMATED IN THAT ACTIVITY (DISREGARDING NULL VALUES)\r\n-\r\n(SUM(\r\n    PU_COUNT(\r\n   \"<%= SETUP_NAME_CASE_TABLE %>\", \"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"_CASE_KEY\",\r\n   \"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"ACTIVITY_<%= SETUP_LANGUAGE %>\" = '<%=AUTOMATION_ACT_8%>' AND \r\n   ISNULL(\"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"USER_TYPE\") = 0 AND \r\n   \"<%= SETUP_NAME_ACTIVITY_TABLE %>\".\"USER_TYPE\" NOT IN (<%= SETUP_MANUAL_USER_TYPE %>)\r\n))))\r\n--GIVES US THE REMAINING CASE COUNT (CASES THAT SHOULD BE AUTOMATED BUT ARE NOT YET)\r\n\r\n\r\n--TIMES EFFORT (in min)\r\n*\r\n<%= AUTOMATION_ACT_8_EFF %>\r\n\r\n--TIMES FTE COST PER MINUTE\r\n*\r\n(<%= SETUP_FTE_COST %>/(<%= SETUP_FTE_HOURS %>*60.0))\r\n\r\n"
  },
  {
    "description": null,
    "id": "658b06fa-0391-4c5c-8922-efb6ae597c5d",
    "name": "Opportunity: Consulting",
    "parameterCount": 0,
    "parameters": [],
    "template": "1.0*(<%= CONSULTING_TIME %>/100.0)*1.0*SUM(CASE WHEN <%=CONSULTING_COMPANY%> THEN \"BSEG\".\"WRBTR_CONVERTED\" ELSE 0.0 END)\n*(<%= CONSULTING_PERCENT %>/100.0)*1.0*<%= CONSULTING_IMP %>/100\n\n* <%=SETUP_TIME_FACTOR%>"
  },
  {
    "description": null,
    "id": "3618e042-27d8-4db7-8786-3c86bc4f98ad",
    "name": "Maverick Buying: Invoice wo PO value",
    "parameterCount": 0,
    "parameters": [],
    "template": "SUM(CASE WHEN <%=MAV_IS_MAVERICK%> THEN 0.0 ELSE (CASE WHEN ISNULL(\"LFA1\".\"VBUND\") = 1 THEN \"BSEG\".\"WRBTR_CONVERTED\" ELSE NULL END) END)"
  },
  {
    "description": null,
    "id": "a37d35dd-3f09-410e-a942-7d68e5feb464",
    "name": "Opportunity: Discount Losses",
    "parameterCount": 0,
    "parameters": [],
    "template": "SUM(CASE \n    WHEN DAYS_BETWEEN(<%=SETUP_CLEARING_DATE%>,<%=SETUP_DISCOUNT_DATE%>) < 0 \n    AND \"BSEG\".\"ZBD1P\" > 0 \n    THEN 1.0*\"BSEG\".\"SKFBT_CONVERTED\"*\"BSEG\".\"ZBD1P\"/100 \nELSE 0.0 END)\n*1.0\n*<%= DISCOUNT_OPT %>/100\n\n\n*<%=SETUP_TIME_FACTOR%>"
  },
  {
    "description": null,
    "id": "762084e1-4941-495a-b26c-6ffea37a7c7f",
    "name": "Opportunity: Maverick Buying",
    "parameterCount": 0,
    "parameters": [],
    "template": "1.0*(<%=MAV_BUYING_POT %>/100.0)*KPI(\"Maverick Buying: Invoice wo PO value\")*(<%=MAV_BUYING_DISCOUNT %>/100.0)\n*<%=SETUP_TIME_FACTOR%>"
  },
  {
    "description": null,
    "id": "806e8117-73c9-4486-baac-6a1a13a095f9",
    "name": "Opportunity: Late Payments",
    "parameterCount": 0,
    "parameters": [],
    "template": "\n\n\n--SETUP_DUE_DATE = required payment date\n--ClearingDate = Actual payment date\n--OTD_Latest = latest date in dataset\n--DAYS_BETWEEN(X,Y) = Y - X [days]\n\nSUM(CASE\n    \n    --NO Due Date\n    WHEN ISNULL(<%= SETUP_DUE_DATE %>) = 1 \n    THEN 0.0\n    \n    --ON TIME (POTENTIALLY)\n    WHEN ISNULL(<%=SETUP_CLEARING_DATE %>) = 1 \n    AND DAYS_BETWEEN(TO_TIMESTAMP('<%= OTD_LATEST %>','YYYYMMDD'),<%= SETUP_DUE_DATE %>) >= 0 \n    THEN 0.0\n    --'No payment but future due date'\n    \n    --TOO LATE, NO Payment\n    WHEN ISNULL(<%=SETUP_CLEARING_DATE %>) = 1 \n    AND DAYS_BETWEEN(TO_TIMESTAMP('<%= OTD_LATEST %>','YYYYMMDD'),<%= SETUP_DUE_DATE %>)  < 0 \n    THEN 0.0\n    --'No goods receipt and due date passed'\n    --'Late delivery'\n    \n    --ON TIME WITH EARLY INTERVAL\n    WHEN DAYS_BETWEEN(<%=SETUP_CLEARING_DATE %>, <%= SETUP_DUE_DATE %>) >= <%= LATE_PAYMENT_THRESH_MIN %>\n    AND DAYS_BETWEEN(<%=SETUP_CLEARING_DATE %>, <%= SETUP_DUE_DATE %>) <= <%= EARLY_PAYMENT_THRESH_MIN %>\n    THEN 0.0\n    --'On time delivery'\n    --although a little early, it is within the early interval of everything between 0 to x days early\n     \n    --TOO EARLY\n    --'Early delivery'\n    --outside the On time delivery interval, too early\n\n    WHEN DAYS_BETWEEN(<%= SETUP_CLEARING_DATE %>,<%=SETUP_DISCOUNT_DATE%>) > <%= EARLY_PAYMENT_THRESH_MIN %>\n    AND DAYS_BETWEEN(<%=SETUP_CLEARING_DATE %>, <%= SETUP_DUE_DATE %>) <= <%= EARLY_PAYMENT_THRESH_MAX %>\n    THEN 0.0--Paid too early before discount date\n    \n    \n    WHEN DAYS_BETWEEN(<%= SETUP_CLEARING_DATE %>,<%=SETUP_DUE_DATE%>) > <%= EARLY_PAYMENT_THRESH_MIN %>\n    AND PU_COUNT(BSEG,_CEL_AP_ACTIVITIES.ACTIVITY_EN,_CEL_AP_ACTIVITIES.ACTIVITY_EN = 'Cash Discount Due Date passed') = 0 \n    AND DAYS_BETWEEN(<%=SETUP_CLEARING_DATE %>, <%= SETUP_DUE_DATE %>) <= <%= EARLY_PAYMENT_THRESH_MAX %>\n    THEN 0.0--paid too early when no cash discount due date exists\n    \n    \n    \n    WHEN DAYS_BETWEEN(<%= SETUP_CLEARING_DATE %>,<%=SETUP_DUE_DATE%>) > <%= EARLY_PAYMENT_THRESH_MIN %>\n    AND DAYS_BETWEEN(<%=SETUP_DISCOUNT_DATE%>,<%= SETUP_CLEARING_DATE %>) > 0  \n    AND DAYS_BETWEEN(<%=SETUP_CLEARING_DATE %>, <%= SETUP_DUE_DATE %>) <= <%= EARLY_PAYMENT_THRESH_MAX %>\n    THEN 0.0--paid too early when a cash discount due date exists (and was missed)\n   \n\n    \n    \n    --TOO LATE\n    WHEN DAYS_BETWEEN(<%= SETUP_DUE_DATE %>,<%=SETUP_CLEARING_DATE %>) > <%= LATE_PAYMENT_THRESH_MIN %>\n    AND DAYS_BETWEEN(<%= SETUP_DUE_DATE %>, <%=SETUP_CLEARING_DATE %>) <= <%= LATE_PAYMENT_THRESH_MAX %>\n    AND ISNULL(\"LFA1\".\"VBUND\") = 1\nTHEN \"BSEG\".\"WRBTR_CONVERTED\"*(DAYS_BETWEEN(<%= SETUP_DUE_DATE %>, <%=SETUP_CLEARING_DATE %>)/365.0)*(<%= LATE_PAYMENT_PENALTY %>/100.0)\n    --'Late delivery'\n    --outside the On time delivery interval, too late\n    \n    ELSE 0.0\n    --'Other'\n    \nEND)\n\n\n\n\n\n\n\n\n\n\n\n\n\n*(1.0*<%= LATE_PAYMENT_POT %>/100)\n\n\n\n\n\n*<%=SETUP_TIME_FACTOR%>"
  },
  {
    "description": null,
    "id": "1aac80c1-36f1-492b-85ee-e858b38330cc",
    "name": "Maverick Buying: Due After",
    "parameterCount": 0,
    "parameters": [],
    "template": "DAYS_BETWEEN(CASE WHEN ISNULL(\"BSEG\".\"ZBD1T_INT\") = 1 THEN \"BSEG\".\"ZFBDT\" ELSE ADD_DAYS(\"BSEG\".\"ZFBDT\",\"BSEG\".\"ZBD1T_INT\") END, PU_FIRST(\"BSEG\", \"_CEL_AP_ACTIVITIES\".\"EVENTTIME\", \"_CEL_AP_ACTIVITIES\".\"ACTIVITY_EN\" = 'Cash Discount Due Date passed'))"
  },
  {
    "description": null,
    "id": "79e3ada2-2b40-4ee4-928c-e6d8c5f14f71",
    "name": "Opportunity: Payment Blocks",
    "parameterCount": 0,
    "parameters": [],
    "template": "<%= SETUP_TIME_FACTOR %>*\r\n(\r\n--projected reduction in the amount of BLOCK activity\r\n(<%= BLOCK_ACT_1_POT %>/100.0)\r\n\r\n\r\n--minutes of BLOCK activity\r\n*<%= BLOCK_ACT_1_EFF %>\r\n\r\n--fte cost per minute\r\n*(<%= SETUP_FTE_COST %>/(<%= SETUP_FTE_HOURS %>*60.0))\r\n\r\n\r\n--quantity of BLOCK activity\r\n*SUM(\r\nPU_COUNT(\r\n    \"BSEG\",\r\n    \"_CEL_AP_ACTIVITIES\".\"_CASE_KEY\",\r\n    \"_CEL_AP_ACTIVITIES\".\"USER_TYPE\" IN (<%= SETUP_MANUAL_USER_TYPE %>)  AND \r\n    \"_CEL_AP_ACTIVITIES\".\"ACTIVITY_EN\" = '<%= BLOCK_ACT_1 %>'\r\n)\r\n)\r\n\r\n+\r\n\r\n--projected reduction in the amount of BLOCK activity\r\n(<%= BLOCK_ACT_2_POT %>/100.0)\r\n\r\n\r\n--minutes of BLOCK activity\r\n*<%= BLOCK_ACT_2_EFF %>\r\n\r\n--fte cost per minute\r\n*(<%= SETUP_FTE_COST %>/(<%= SETUP_FTE_HOURS %>*60.0))\r\n\r\n\r\n--quantity of BLOCK activity\r\n*SUM(\r\nPU_COUNT(\r\n    \"BSEG\",\r\n    \"_CEL_AP_ACTIVITIES\".\"_CASE_KEY\",\r\n    \"_CEL_AP_ACTIVITIES\".\"USER_TYPE\" IN (<%= SETUP_MANUAL_USER_TYPE %>)  AND \r\n    \"_CEL_AP_ACTIVITIES\".\"ACTIVITY_EN\" = '<%= BLOCK_ACT_2 %>'\r\n)\r\n)\r\n\r\n+\r\n\r\n--projected reduction in the amount of BLOCK activity\r\n(<%= BLOCK_ACT_3_POT %>/100.0)\r\n\r\n\r\n--minutes of BLOCK activity\r\n*<%= BLOCK_ACT_3_EFF %>\r\n\r\n--fte cost per minute\r\n*(<%= SETUP_FTE_COST %>/(<%= SETUP_FTE_HOURS %>*60.0))\r\n\r\n\r\n--quantity of BLOCK activity\r\n*SUM(\r\nPU_COUNT(\r\n    \"BSEG\",\r\n    \"_CEL_AP_ACTIVITIES\".\"_CASE_KEY\",\r\n    \"_CEL_AP_ACTIVITIES\".\"USER_TYPE\" IN (<%= SETUP_MANUAL_USER_TYPE %>)  AND \r\n    \"_CEL_AP_ACTIVITIES\".\"ACTIVITY_EN\" = '<%= BLOCK_ACT_3 %>'\r\n)\r\n))"
  },
  {
    "description": null,
    "id": "118e513d-6574-4c04-ae88-306558bb87cf",
    "name": "Maverick Buying: Payment After",
    "parameterCount": 0,
    "parameters": [],
    "template": "DATEDIFF(dd,\"AP_BSEG\".\"ZFBDT\",\"AP_BSEG\".\"AUGDT\")"
  },
  {
    "description": "",
    "id": "20113c26-36a2-464e-99c6-1e5932c9df08",
    "name": "Due After_GMH",
    "parameterCount": 0,
    "parameters": [],
    "template": "CASE \nWHEN \"AP_BSEG\".\"ZBD1T\" > 0 THEN \"AP_BSEG\".\"ZBD1T\"\nWHEN \"AP_BSEG\".\"ZBD1T\" = 0 AND \"AP_BSEG\".\"ZBD1P\" > 0 THEN \"AP_BSEG\".\"ZBD1T\"\nELSE \"AP_BSEG\".\"ZBD3T\"\nEND"
  },
  {
    "description": "",
    "id": "3e680a81-c44a-4d01-b9e6-3e5f387519f8",
    "name": "Payment After",
    "parameterCount": 0,
    "parameters": [],
    "template": "DATEDIFF(dd,TO_TIMESTAMP(\"AP_BSEG\".\"ZFBDT\",'YYYYMMDD'),TO_TIMESTAMP(\"AP_BSEG\".\"AUGDT\",'YYYYMMDD'))"
  }
]